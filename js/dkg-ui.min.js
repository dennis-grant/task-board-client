var DKG_UI=(function(a){var b={createEventListenerElem:function(c){if(c===undefined){this.eventListenerElem=$("<div></div>")}else{this.eventListenerElem=c}},bind:function(c,d){this.eventListenerElem.bind(c,d)},unbind:function(c,d){this.eventListenerElem.unbind(c,d)},trigger:function(c){this.eventListenerElem.trigger(c)},mixin:function(d,c){for(var e in b){if(e=="mixin"){continue}d[e]=b[e]}d.createEventListenerElem(c)}};a.EventBindable=b;return a}(DKG_UI||{}));var DKG_UI=(function(b){var c=b.EventBindable;var a=function(){var d=this;this.init=function(){this.itemsArr=[];c.mixin(this)};this.length=function(){return this.itemsArr.length};this.replace=function(f,e){var g;if(f>=0&&f<=(this.length()-1)){g=this.itemsArr[f];this.itemsArr[f]=e;this.trigger({type:"listChanged",action:"itemReplaced",replacePosition:f,oldItem:g,newItem:e})}};this.add=function(e){this.itemsArr[this.length()]=e;this.trigger({type:"listChanged",action:"itemAdded",item:e})};this.addAll=function(f){for(var e=0;e<f.length;e++){this.add(f[e])}};this.insert=function(f,e){if(f>=0&&f<=(this.length()-1)){this.itemsArr.splice(f,0,e);this.trigger({type:"listChanged",action:"itemInserted",insertPosition:f,item:e})}};this.insertAll=function(e,g){for(var f=g.length-1;f>=0;f--){this.insert(e,g[f])}};this.remove=function(e){var f;if(e>=0&&e<=(this.length()-1)){f=this.itemsArr[e];this.itemsArr.splice(e,1);this.trigger({type:"listChanged",action:"itemRemoved",deletePosition:e,item:f})}};this.empty=function(){this.itemsArr=[];this.trigger({type:"listChanged",action:"emptied"})};this.get=function(e){var f;if(e>=0&&e<=(this.length()-1)){f=this.itemsArr[e]}else{f=undefined}return f};this.init()};b.ObservableList=a;return b}(DKG_UI||{}));var DKG_UI=(function(c){var d=c.EventBindable;var a=c.ObservableList;var b=function(g,h,e){var f=this;this.init=function(){var k;this.model=g;this.width=e;this.selectedEntry=undefined;this.options={showRollOver:true,showSelectedEntry:true,emptyListMessage:"There are no items to display."};this.rendererClass=h;this.rendererControls=new a();this.listElements=new a();this.createControlElement();for(var j=0;j<this.model.length();j++){k=this.createRendererControl(this.model.get(j));this.addEntry(k)}this.model.bind("listChanged",this.modelChanged);d.mixin(this,this.controlElement)};this.createControlElement=function(){this.controlElement=$(this.toHTML());if(this.width!=undefined){this.controlElement.css({width:this.width})}};this.getControlElement=function(){return this.controlElement};this.toHTML=function(){var i;i="";i+="<div class='list-control'>";i+="	<div class='entries'></div>";i+="	<div class='empty-list-message'>"+this.options.emptyListMessage+"</div>";i+="</div>";return i};this.entryWrapperHTML=function(){return"<div class='list-control-entry'></div>"};this.setModel=function(k){var l;this.model.unbind("listChanged");this.emptyEntries();this.model=k;for(var j=0;j<this.model.length();j++){l=this.createRendererControl(this.model.get(j));this.addEntry(l)}this.model.bind("listChanged",this.modelChanged)};this.setOptions=function(i){if(i.showRollOver!==undefined){this.options.showRollOver=i.showRollOver}if(i.showSelectedEntry!==undefined){this.options.showSelectedEntry=i.showSelectedEntry;if(this.options.showSelectedEntry===false&&this.selectedEntry!==undefined){this.selectedEntry.removeClass("selected-entry")}else{if(this.options.showSelectedEntry===true&&this.selectedEntry!==undefined){this.selectedEntry.addClass("selected-entry")}}}if(i.emptyListMessage!==undefined){this.options.emptyListMessage=i.emptyListMessage;this.controlElement.find(".empty-list-message").html(this.options.emptyListMessage)}};this.hideEmptyListMessage=function(){this.controlElement.find(".empty-list-message").hide()};this.showEmptyListMessage=function(){this.controlElement.find(".empty-list-message").show()};this.highlightEntry=function(i){if(this.options.showRollOver===true){i.addClass("highlighted-entry")}};this.unhighlightEntry=function(i){i.removeClass("highlighted-entry")};this.selectEntryAtPos=function(i){var j;j=this.listElements.get(i);if(j!==undefined){this.selectEntry(j)}};this.selectEntry=function(i){this.unselectEntry();this.selectedEntry=i;this.selectedEntry.attr("selected","yes");if(this.options.showSelectedEntry===true){this.selectedEntry.addClass("selected-entry")}this.trigger({type:"ListControlEvent",subType:"EntrySelected",list:this})};this.unselectEntry=function(){if(this.selectedEntry!==undefined){this.selectedEntry.attr("selected","");this.selectedEntry.removeClass("selected-entry")}};this.entryMouseEnter=function(i){f.highlightEntry($(this))};this.entryMouseLeave=function(i){f.unhighlightEntry($(this))};this.entryClicked=function(i){f.selectEntry($(this))};this.modelChanged=function(i){if(i.action==="itemAdded"){f.addEntry(f.createRendererControl(i.item))}else{if(i.action==="itemReplaced"){f.replaceEntry(i.replacePosition,f.createRendererControl(i.newItem))}else{if(i.action==="itemInserted"){f.insertEntry(i.insertPosition,f.createRendererControl(i.item))}else{if(i.action==="itemRemoved"){f.removeEntry(i.deletePosition)}else{if(i.action==="emptied"){f.emptyEntries()}}}}}};this.createRendererControl=function(i){return new this.rendererClass(i,this.width)};this.createWrappedElement=function(j){var i;i=$(this.entryWrapperHTML());i.append(j.getControlElement());i.bind("mouseenter",this.entryMouseEnter);i.bind("mouseleave",this.entryMouseLeave);i.bind("click",this.entryClicked);return i};this.addEntry=function(j){var i;i=this.createWrappedElement(j);this.controlElement.find(".entries").append(i);this.rendererControls.add(j);this.listElements.add(i);this.hideEmptyListMessage()};this.replaceEntry=function(l,m){var k;var i;var j;if(l>=0&&l<this.listElements.length()){k=this.listElements.get(l);i=this.createWrappedElement(m);j=k.attr("selected");if(j!==undefined&&j==="yes"){this.selectEntry(i)}k.replaceWith(i);this.rendererControls.replace(l,m);this.listElements.replace(l,i)}};this.insertEntry=function(k,l){var j;var i;if(k>=0&&k<this.listElements.length()){j=this.listElements.get(k);i=this.createWrappedElement(l);j.before(i);this.rendererControls.insert(k,l);this.listElements.insert(k,i)}};this.removeEntry=function(k){var j;var i;if(k>=0&&k<this.listElements.length()){j=this.listElements.get(k);i=j.attr("selected");if(i!==undefined&&i==="yes"){this.unselectEntry()}j.remove();this.rendererControls.remove(k);this.listElements.remove(k);if(this.listElements.length()===0){this.showEmptyListMessage()}}};this.emptyEntries=function(){this.unselectEntry();this.controlElement.find(".entries").empty();this.rendererControls.empty();this.listElements.empty();this.showEmptyListMessage()};this.init()};c.ListControl=b;return c}(DKG_UI||{}));var DKG_UI=(function(a){var b=function(c){var d=this;this.init=function(){this.options=c;this.createControlElement()};this.createControlElement=function(){this.controlElement=$(this.toHTML())};this.getControlElement=function(){return this.controlElement};this.append=function(e){this.controlElement.find(".content").append(e)};this.showHeader=function(){this.controlElement.find(".header").show()};this.hideHeader=function(){this.controlElement.find(".header").hide()};this.setOptions=function(f){var e;if(f.icon!==undefined){this.options.icon=f.icon;if(this.options.icon!==""){e="<img class='icon' src='"+this.options.icon+"'>"}else{e="<div class='icon'></div>"}this.controlElement.find(".icon").replaceWith(e)}if(f.title!==undefined){this.options.title=f.title;this.controlElement.find(".title").text(this.options.title)}};this.toHTML=function(){var g;var e;var f;g="";g+="<div class='panel-control'>";g+="	<div class='header'>";g+="		:icon:<div class='title'>:title:</div>";g+="	</div>";g+="	<div class='content'></div>";g+="</div>";if(this.options.icon!==undefined&&this.options.icon!==""){f="<img class='icon' src='"+this.options.icon+"'>"}else{f="<div class='icon'></div>"}e=g.replace(/:icon:/g,f).replace(/:title:/g,this.options.title);return e};this.init()};a.Panel=b;return a}(DKG_UI||{}));var ModeSelector={DEFAULT_MODE:"__default__",DEFAULT_MODE_ATTR_NAME:"mode",MODE_CLASS_PAIR_PATTERN:/[^:]*:([^;]*);*/,mode:undefined,modeOptions:{modeAttributeName:"mode",searchDepth:-1},getMode:function(){return this.mode},setMode:function(f){var d;var a;var e;var b;if(f!==undefined&&this.mode!==f){this.mode=f;a=new RegExp("^"+this.mode+"$|^"+this.mode+",|,"+this.mode+",|,"+this.mode+"$");e=new RegExp("^"+this.mode+":[^;]*$|^"+this.mode+":[^;]*;|;"+this.mode+":[^;]*;|;"+this.mode+":[^;]*$");d=$(this).find("*[mode],*[mode_class]");for(var c=0;c<d.length;c++){this.toggleElement(d[c],a);b=$(d[c]).attr("mode_class");if(b!==undefined&&b!==""){this.setElementClass(d[c],e)}}}},toggleElement:function(c,a){var b;b=$(c).attr("mode");if(b!==undefined&&b!==""){if(a.test(b)===true){$(c).show()}else{$(c).hide()}}},setElementClass:function(f,e){var c;var d;var a;var b;if(this.mode===this.DEFAULT_MODE){b=$(f).attr("defaultClass");$(f).removeClass().addClass(b)}else{c=$(f).attr("mode_class");if(c!==undefined&&c!==""){d=c.match(e);if(d!==null){a=d[0];d=a.match(this.MODE_CLASS_PAIR_PATTERN);b=d[1]}else{b=$(f).attr("defaultClass")}$(f).removeClass().addClass(b)}}},saveDefaultClass:function(){$(this).find("*[mode_class]").each(function(a,b){$(b).attr("defaultClass",$(b).attr("class"))})},resetMode:function(){this.setMode(this.DEFAULT_MODE)},setOptions:function(a){if(a!==undefined){for(var b in a){this.modeOptions[b]=a[b]}}},mixin:function(a){for(var b in ModeSelector){if(b=="mixin"){continue}a[b]=ModeSelector[b]}a.saveDefaultClass();a.resetMode()}};